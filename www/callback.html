<!DOCTYPE html>
<html>
<head>
</head>
<script>
  function getVariableFromHash(variable) {
    var query = location.href.split('#')[1];
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
      var pair = vars[i].split('=');
      if (decodeURIComponent(pair[0]) == variable) {
        return decodeURIComponent(pair[1]);
      }
    }
    console.log('Query variable %s not found', variable);
  }

  function obtainAccessToken() {
    var accessToken = getVariableFromHash('access_token');
    localStorage.setItem('ls.accessToken', accessToken);
    window.close();
  }

</script>
<body onload="obtainAccessToken()">
This is just a hack for getting the access token when using a desktop browser.
</body>
</html>
